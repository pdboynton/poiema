<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Poiēma Campaign Tracker</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#4CAF50">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
</head>
<body>

    <header id="app-header">
        <div class="logo">
            <span class="logo-fence">| |</span> <span class="logo-garden">Poiēma</span> <span class="logo-fence">| |</span>
        </div>
        <div class="subtitle">The Dignity of Purpose</div>
    </header>

    <main id="content-container">
        
        <!-- SECTION I: CAMPAIGN DASHBOARD (HOME) -->
        <section id="dashboard" class="content-section active">
            <div class="affirmation-header">
                <h2>You Are God’s Poiēma: His Masterpiece.</h2>
                <p class="poiema-verse">Created in Christ Jesus for good works. (Ephesians 2:10)</p>
            </div>
            
            <div class="tracker-card">
                <div id="progress-status"></div>
                <div class="progress-bar-container">
                    <div id="progress-bar" style="width: 0;"></div>
                </div>
            </div>

            <div class="feature-card">
                <h3>The Engine of Totality</h3>
                <p>Love the Lord your God with all your heart, soul, and mind. This vertical love fuels all horizontal action.</p>
            </div>

            <div class="feature-card check-in">
                <h3>The Garden Meter</h3>
                <p>Are you moving beyond the "Fence" to the "Garden" today? Tap below to start your assignment.</p>
                <button onclick="showSection('daily-praxis')">Go to Today's Assignment</button>
            </div>
        </section>

        <!-- SECTION II: DAILY PRAXIS (TODAY) -->
        <section id="daily-praxis" class="content-section">
            <h2 id="daily-title"></h2>
            <p id="daily-quote" class="quote"></p>

            <div class="card core-insight">
                <h3>Core Insight</h3>
                <p id="daily-insight"></p>
            </div>

            <div class="card challenge-point">
                <h3>Today's Challenge: Putting It Into Practice</h3>
                <p id="daily-challenge"></p>
            </div>

            <div class="card reflection-journal">
                <h3>Reflection & Journal</h3>
                <p class="prompt">Did this act of service flow from 'delight, not duty'? Document your results:</p>
                <textarea id="journal-entry" placeholder="Record what God is speaking to your heart and the actions you took..." rows="5"></textarea>
                <button onclick="saveJournal()">Save Reflection</button>
                <p class="save-status" id="save-status"></p>
            </div>

            <div class="card prayer-prompt">
                <h3>Daily Prayer Prompt</h3>
                <p id="daily-prayer-prompt"></p>
            </div>
        </section>

        <!-- SECTION III: CAMPAIGN INDEX (JOURNEY MAP) -->
        <section id="journey-map" class="content-section">
            <h2>The 40-Day Journey Map</h2>
            <div id="weekly-accordion">
                <!-- Content generated by JavaScript -->
            </div>
            
            <div class="feature-card review-card">
                <h3>Quick Reference: Key Concepts</h3>
                <p>Review the Glossary (The Vault) for terms like *Poiēma, Plērōma, Kenōsis, and Shalom*.</p>
            </div>
        </section>

        <!-- SECTION IV: DEEP DIVE & RESOURCES (THE VAULT) -->
        <section id="resources" class="content-section">
            <h2>The Vault: Deep Dive & Resources</h2>
            <br/>
            <div class="card">
                <h3>The Deep Dive</h3>
                <div id="audioContainer"></div>
            </div>

            <div class="card">
                <h3>Theological Anchor</h3>
                <p>We are saved by grace alone, FOR good works, not *by* them. Good works are the visible, tangible display of God’s invisible grace.</p>
            </div>

            <div class="card">
                <h3>Key Concepts Glossary</h3>
                <dl class="glossary">
                    <dt>Poiēma (Day 2)</dt>
                    <dd>Masterpiece/Workmanship. Identity is Poiēma; job is to create poiēma (good works).</dd>
                    
                    <dt>The Fence (Day 1)</dt>
                    <dd>Passive Righteousness ("Thou shalt nots," doing no harm). Necessary, but not the final goal.</dd>
                    
                    <dt>The Garden (Day 1)</dt>
                    <dd>Active Righteousness ("Thou shalt do good"). Proactive cultivation of fruitfulness.</dd>

                    <dt>Kenōsis (Day 20)</dt>
                    <dd>Self-Emptying. Laying down our "rights" and pride to serve others, taking the nature of a servant.</dd>

                    <dt>Shalom (Day 7)</dt>
                    <dd>Wholeness/Peace. Our calling is to be agents of completeness and total well-being.</dd>
                </dl>
            </div>

            <div class="card">
                <h3>Sustaining Transformation: The Habit of Review</h3>
                <p>A daily review of three principles to prevent the 'spiritual project' from fading:</p>
                <ol>
                    <li><strong>Posture: The "Towel" Check</strong> (Humility)</li>
                    <li><strong>Power: The "Vine" Check</strong> (Abiding vs. Striving)</li>
                    <li><strong>Purity: The "Wisdom" Check</strong> (Earthly vs. Divine Motives)</li>
                </ol>
            </div>
        </section>

        <!-- SECTION V: COMMUNITY HUB -->
        <section id="community" class="content-section">
            <h2>Community Hub: Partnership in Service</h2>
            <br/>
            <div class="card">
                <h3>The Community Commitment</h3>
                <p>The "do the most good" life is not a solo mission. We need partnership for accountability, encouragement, and collective power.</p>
            </div>

            <div class="card">
                <h3>The Three-Part Group Rhythm</h3>
                <p>A successful study session should follow this rhythm:</p>
                <ol>
                    <li><strong>Reflect & Share:</strong> Humility & Accountability.</li>
                    <li><strong>Discuss & Dig:</strong> Wisdom & Strategy.</li>
                    <li><strong>Commit & Pray:</strong> Action & Power.</li>
                </ol>
            </div>

            <div class="card discussion-prompts">
                <h3>Sample Discussion Prompts (Week 3)</h3>
                <p><strong>Straining vs. Surrendering (Day 15):</strong> Where did you feel the most "straining" (anxiety, frustration, exhaustion) this week? What does that tell you about where you need to "abide in the Vine" (Day 16) more?</p>
                <p><strong>The Towel (Day 21):</strong> What was the "dirty feet" task you found most humbling to do this week, and how did you feel when you did it without seeking thanks?</p>
            </div>

            <div class="card">
                <h3>The Covenant</h3>
                <p>Sign the Do the Most Good Covenant as a concrete commitment to a New Identity, New Posture, New Power, and New Focus.</p>
                <button>Download Covenant PDF</button>
            </div>
        </section>

    </main>

    <!-- FIXED NAVIGATION MENU -->
    <nav id="nav-menu">
        <button onclick="showSection('dashboard')">Home: Poiēma</button>
        <button onclick="showSection('daily-praxis')">Today: Assignment</button>
        <button onclick="showSection('journey-map')">Journey Map</button>
        <button onclick="showSection('resources')">The Vault</button>
        <button onclick="showSection('community')">Community Hub</button>
    </nav>

    <script src="script.js" defer></script>
    <script>
        // Register Service Worker for PWA features
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(registration => {
                        console.log('SW registered: ', registration);
                    })
                    .catch(registrationError => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }
    </script>
</body>
</html>